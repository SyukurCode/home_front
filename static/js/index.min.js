function deleteItem(e){confirm("Are you confirm to delete?")&&$.ajax({url:"/?id="+e,type:"DELETE",success:function(e){location.replace("/")},error:function(e){alert(JSON.stringify(e.message))}})}function typeSelect(e){document.getElementById("wish").style.display="none",document.getElementById("play").style.display="none",1==e&&(document.getElementById("wish").style.display="flex"),3==e&&(document.getElementById("play").style.display="flex")}function repeatSelect(e){var t=document.getElementById("once"),n=document.getElementById("time"),l=document.getElementById("allday"),a=document.getElementById("daily"),d=document.getElementById("day"),o=document.getElementById("monthly"),i=document.getElementById("nota"),y=document.getElementById("notice");if(l.style.display="none",n.style.display="none",a.style.display="none",t.style.display="none",d.style.display="none",o.style.display="none",y.style.display="none",1==e&&("none"===t.style.display&&(t.style.display="flex"),"none"===y.style.display&&(y.style.display="flex",i.innerHTML="This event will execute only one time.")),2==e&&("none"===l.style.display&&(l.style.display="flex"),"none"===y.style.display&&(y.style.display="flex",i.innerHTML="This event will execute every hours on that date.")),3==e&&("none"===a.style.display&&(a.style.display="flex"),"none"===n.style.display&&(n.style.display="flex"),"none"===y.style.display&&(y.style.display="flex",i.innerHTML="This event will be held on every weekday and time that has been set.")),4==e){var c=new Date;"none"===d.style.display&&(d.style.display="flex");var s=document.getElementById("eday");s.options.length=0;for(let e=0;e<31;e++){var r=document.createElement("option");r.text=e+1,r.value=e+1,s.add(r)}"none"===y.style.display&&(y.style.display="flex",i.innerHTML="This event will be held every month on the day that has been set and every hour."),s.value=c.getDate()}5==e&&("none"===o.style.display&&(o.style.display="flex"),"none"===d.style.display&&(d.style.display="flex"),"none"===y.style.display&&(y.style.display="flex",i.innerHTML="This event will be held on every year on month and day that has been set."))}function monthSelect(e){var t=new Date,n=getDaysInMonth(e,t.getFullYear()),l=document.getElementById("eday");l.options.length=0;for(let e=0;e<n;e++){var a=document.createElement("option");a.text=e+1,a.value=e+1,l.add(a)}l.value=t.getDate()}function getDaysInMonth(e,t){return lastday=new Date(t,e,0).getDate(),new Date(t,e,0).getDate()}function getMedia(){$.getJSON("/getmedia",(function(e,t){if("success"==t){var n=document.getElementById("media"),l=document.createElement("option");n.options.length=0,l.text="Choose",l.value="",n.add(l);try{e.forEach((e=>{Object.entries(e).forEach((([e,t])=>{const l=document.createElement("option");l.text=e,l.value=t,n.add(l)}))}))}catch(e){alert(e.toString)}}})).fail((function(e,t,n){$("#type option[value='3']").remove()}))}function getTypenRepeat(){$.getJSON("/getrepeat",(function(e,t){if("success"==t){var n=document.getElementById("repeat");n.options.length=0,(l=document.createElement("option")).text="Choose..",l.value="",n.add(l);try{for(let t=0;t<e.length;t++){var l;(l=document.createElement("option")).text=e[t].name,l.value=e[t].id,n.add(l)}}catch(e){alert(e.toString())}}else alert(e.message)}))}function getTypenType(){$.getJSON("/gettype",(function(e,t){if("success"==t){var n=document.getElementById("type");n.options.length=0,(l=document.createElement("option")).text="Choose..",l.value="",n.add(l);try{for(let t=0;t<e.length;t++){var l=document.createElement("option");2!=e[t].id&&(l.text=e[t].name,l.value=e[t].id,n.add(l))}n.value="1"}catch(e){alert(e.toString())}}else alert(e.message)}))}function Validate(){if(""==document.getElementById("ename").value)return document.getElementById("nameFeedback").innerHTML="Pleace enter event name.",!1;if(document.getElementById("nameFeedback").innerHTML="",1==document.getElementById("type").value&&""==document.getElementById("etext").value)return document.getElementById("textFeedback").innerHTML="Pleace enter event text.",!1;if(document.getElementById("textFeedback").innerHTML="",3==document.getElementById("type").value&&""==document.getElementById("media").value)return document.getElementById("mediaFeedback").innerHTML="Pleace select media.",!1;if(document.getElementById("mediaFeedback").innerHTML="",""==document.getElementById("type").value)return document.getElementById("repeatFeedback").innerHTML="Pleace select type field.",!1;if(document.getElementById("repeatFeedback").innerHTML="",""==document.getElementById("repeat").value)return document.getElementById("repeatFeedback").innerHTML="Pleace select repeat field.",!1;if(document.getElementById("repeatFeedback").innerHTML="",3==document.getElementById("repeat").value){for(var e=document.getElementsByName("weekday"),t=!1,n=0;n<e.length;n++)if(e[n].checked){t=!0;break}if(!t)return document.getElementById("weekdayFeedback").innerHTML="Please select at least one weekday.",!1}return document.getElementById("weekdayFeedback").innerHTML="",!0}function delete_group(){$("input:checkbox[name=eventId]:checked").each((function(){$.ajax({url:"/?id="+$(this).val(),type:"DELETE",success:function(e){location.replace("/")},error:function(e){alert(JSON.stringify(e.error.message))}})}))}function check(){var e=!1;$("input:checkbox[name=eventId]:checked").each((function(){e=!0})),btnDeleteGroup.hidden=!e}window.addEventListener("load",(function(){var e=new Date,t=e.toISOString().substring(0,19),n=e.getFullYear(),l=e.getMonth()+1,a=e.getDate(),d=e.getHours(),o=e.getMinutes(),i=(e.getSeconds(),a<10&&a.toString(),l<10&&l.toString(),n+"-"+(l<10?"0"+l.toString():l)+"-"+(a<10?"0"+a.toString():a)+"T"+(d<10?"0"+d.toString():d)+":"+(o<10?"0"+o.toString():o)+t.substring(16,19)),y=(d<10?"0"+d.toString():d)+":"+(o<10?"0"+o.toString():o);document.getElementById("datetimepicker").value=i,document.getElementById("timepicker").value=y,document.getElementById("emonth").value=l,monthSelect(l),getTypenType(),getTypenRepeat(),getMedia();var c=(new Date).toISOString().slice(0,16);document.getElementsByName("datetimepicker")[0].min=c;var s=(new Date).toISOString().split("T")[0];document.getElementById("datepicker").setAttribute("min",s),document.getElementById("datepicker").setAttribute("value",s)}));
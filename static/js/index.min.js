function deleteItem(e){swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",buttons:{confirm:{text:"Yes, delete it!",className:"btn btn-success"},cancel:{visible:!0,className:"btn btn-danger"}}}).then((t=>{t?($.ajax({url:"/?id="+e,type:"DELETE",success:function(e){location.replace("/")},error:function(e){swal("Error!",JSON.stringify(e.message),{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}}),swal("Event has been deleted!",{icon:"success",buttons:{confirm:{className:"btn btn-success"}}})):swal.close()}))}function typeSelect(e){document.getElementById("wish").style.display="none",document.getElementById("play").style.display="none",1==e&&(document.getElementById("wish").style.display="flex"),3==e&&(document.getElementById("play").style.display="flex")}function repeatSelect(e){var t=document.getElementById("once"),n=document.getElementById("time"),a=document.getElementById("allday"),l=document.getElementById("daily"),o=document.getElementById("day"),d=document.getElementById("monthly"),s=document.getElementById("nota"),i=document.getElementById("notice");if(a.style.display="none",n.style.display="none",l.style.display="none",t.style.display="none",o.style.display="none",d.style.display="none",i.style.display="none",1==e&&("none"===t.style.display&&(t.style.display="flex"),"none"===i.style.display&&(i.style.display="flex",s.innerHTML="This event will execute only one time.")),2==e&&("none"===a.style.display&&(a.style.display="flex"),"none"===i.style.display&&(i.style.display="flex",s.innerHTML="This event will execute every hours on that date.")),3==e&&("none"===l.style.display&&(l.style.display="flex"),"none"===n.style.display&&(n.style.display="flex"),"none"===i.style.display&&(i.style.display="flex",s.innerHTML="This event will be held on every weekday and time that has been set.")),4==e){var c=new Date;"none"===o.style.display&&(o.style.display="flex");var r=document.getElementById("eday");r.options.length=0;for(let e=0;e<31;e++){var m=document.createElement("option");m.text=e+1,m.value=e+1,r.add(m)}"none"===i.style.display&&(i.style.display="flex",s.innerHTML="This event will be held every month on the day that has been set and every hour."),r.value=c.getDate()}5==e&&("none"===d.style.display&&(d.style.display="flex"),"none"===o.style.display&&(o.style.display="flex"),"none"===i.style.display&&(i.style.display="flex",s.innerHTML="This event will be held on every year on month and day that has been set."))}function monthSelect(e){var t=new Date,n=getDaysInMonth(e,t.getFullYear()),a=document.getElementById("eday");a.options.length=0;for(let e=0;e<n;e++){var l=document.createElement("option");l.text=e+1,l.value=e+1,a.add(l)}a.value=t.getDate()}function getDaysInMonth(e,t){return lastday=new Date(t,e,0).getDate(),new Date(t,e,0).getDate()}function getMedia(){$.getJSON("/getmedia",(function(e,t){if("success"==t){var n=document.getElementById("media"),a=document.createElement("option");n.options.length=0,a.text="Choose",a.value="",n.add(a);try{e.forEach((e=>{Object.entries(e).forEach((([e,t])=>{const a=document.createElement("option");a.text=e,a.value=t,n.add(a)}))}))}catch(e){swal("Error!",e.toString,{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}}})).fail((function(e,t,n){$("#type option[value='3']").remove()}))}function getTypenRepeat(){$.getJSON("/getrepeat",(function(e,t){if("success"==t){var n=document.getElementById("repeat");n.options.length=0,(a=document.createElement("option")).text="Choose..",a.value="",n.add(a);try{for(let t=0;t<e.length;t++){var a;(a=document.createElement("option")).text=e[t].name,a.value=e[t].id,n.add(a)}}catch(e){swal("Error!",e.toString,{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}}else swal("Error!",e.message,{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}))}function getTypenType(){$.getJSON("/gettype",(function(e,t){if("success"==t){var n=document.getElementById("type");n.options.length=0,(a=document.createElement("option")).text="Choose..",a.value="",n.add(a);try{for(let t=0;t<e.length;t++){var a=document.createElement("option");2!=e[t].id&&(a.text=e[t].name,a.value=e[t].id,n.add(a))}n.value="1"}catch(e){swal("Error!",e.toString,{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}}else swal("Error!",e.message,{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}))}function Validate(){if(""==document.getElementById("ename").value)return document.getElementById("nameFeedback").innerHTML="Pleace enter event name.",!1;if(document.getElementById("nameFeedback").innerHTML="",1==document.getElementById("type").value&&""==document.getElementById("etext").value)return document.getElementById("textFeedback").innerHTML="Pleace enter event text.",!1;if(document.getElementById("textFeedback").innerHTML="",3==document.getElementById("type").value&&""==document.getElementById("media").value)return document.getElementById("mediaFeedback").innerHTML="Pleace select media.",!1;if(document.getElementById("mediaFeedback").innerHTML="",""==document.getElementById("type").value)return document.getElementById("repeatFeedback").innerHTML="Pleace select type field.",!1;if(document.getElementById("repeatFeedback").innerHTML="",""==document.getElementById("repeat").value)return document.getElementById("repeatFeedback").innerHTML="Pleace select repeat field.",!1;if(document.getElementById("repeatFeedback").innerHTML="",3==document.getElementById("repeat").value){for(var e=document.getElementsByName("weekday"),t=!1,n=0;n<e.length;n++)if(e[n].checked){t=!0;break}if(!t)return document.getElementById("weekdayFeedback").innerHTML="Please select at least one weekday.",!1}return document.getElementById("weekdayFeedback").innerHTML="",!0}function delete_group(){swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",buttons:{confirm:{text:"Yes, delete it!",className:"btn btn-success"},cancel:{visible:!0,className:"btn btn-danger"}}}).then((e=>{e?($("input:checkbox[name=eventId]:checked").each((function(){$.ajax({url:"/?id="+$(this).val(),type:"DELETE",success:function(e){location.replace("/")},error:function(e){swal("Error!",JSON.stringify(e.error.message),{icon:"error",buttons:{confirm:{className:"btn btn-danger"}}})}})})),swal("Event has been deleted!",{icon:"success",buttons:{confirm:{className:"btn btn-success"}}})):swal.close()}))}function check(){var e=!1;$("input:checkbox[name=eventId]:checked").each((function(){e=!0})),btnDeleteGroup.hidden=!e}window.addEventListener("load",(function(){var e=new Date,t=e.toISOString().substring(0,19),n=e.getFullYear(),a=e.getMonth()+1,l=e.getDate(),o=e.getHours(),d=e.getMinutes(),s=(e.getSeconds(),l<10&&l.toString(),a<10&&a.toString(),n+"-"+(a<10?"0"+a.toString():a)+"-"+(l<10?"0"+l.toString():l)+"T"+(o<10?"0"+o.toString():o)+":"+(d<10?"0"+d.toString():d)+t.substring(16,19)),i=(o<10?"0"+o.toString():o)+":"+(d<10?"0"+d.toString():d);document.getElementById("datetimepicker").value=s,document.getElementById("timepicker").value=i,document.getElementById("emonth").value=a,monthSelect(a),getTypenType(),getTypenRepeat(),getMedia();var c=(new Date).toISOString().slice(0,16);document.getElementsByName("datetimepicker")[0].min=c;var r=(new Date).toISOString().split("T")[0];document.getElementById("datepicker").setAttribute("min",r),document.getElementById("datepicker").setAttribute("value",r)}));
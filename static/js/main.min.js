function ValidateRegister(){return document.getElementById("password").value===document.getElementById("re-password").value?(document.getElementById("passwordFeedback").innerHTML="",document.getElementById("re-passwordFeedback").innerHTML="",!0):(document.getElementById("passwordFeedback").innerHTML="password not match",document.getElementById("re-passwordFeedback").innerHTML="password not match",!1)}function validatePassword(){var e=document.getElementById("password").value,t=[];return e.length<8&&t.push("Your password must be at least 8 characters"),e.search(/[a-z]/i)<0&&t.push("Your password must contain at least one letter."),e.search(/[0-9]/)<0&&t.push("Your password must contain at least one digit."),!(t.length>0)||(document.getElementById("passwordFeedback").innerHTML=t.join("\n"),!1)}function changePassword(){var e=document.getElementById("oldPassword").value,t=document.getElementById("password").value,n=document.getElementById("re-password").value;if(validatePassword())if(t==n){const d={password:e,"new-password":t};$.ajax({url:"/changepassword",type:"POST",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",traditional:!0,success:function(d){e="",t="",n="",$("#account").modal("hide"),alert(JSON.stringify(d.message))},error:function(e){const t=e.responseJSON.message;document.getElementById("oldPasswordFeedback").innerHTML=t,document.getElementById("passwordFeedback").innerHTML="",document.getElementById("re-passwordFeedback").innerHTML=""}})}else document.getElementById("oldPasswordFeedback").innerHTML="",document.getElementById("passwordFeedback").innerHTML="password not match",document.getElementById("re-passwordFeedback").innerHTML="Confirm password not match"}function account(e){document.getElementById("accountTitle").innerHTML="account"==e?"Account":"Register",$("#account").modal("show")}function notification(){$.ajax({url:"/checkeventdue",type:"GET",contentType:"application/json; charset=utf-8",traditional:!0,success:function(e){var t=JSON.parse(e);t.length>0?(document.getElementById("noticount").style.display="inline",document.getElementById("noticount").innerHTML=t.length,document.getElementById("notitotal").innerHTML=t.length,document.getElementById("notiitems").style.display="inline",document.getElementById("see-all").style.display="inline",t.forEach((e=>{const t=`\n                        <a href="/detail?id=${e.id}">\n                            <div class="notif-icon notif-primary">\n                                <i class="fas fa-hand-point-right"></i>\n                            </div>\n                            <div class="notif-content">\n                                <span class="block">${e.Name}</span>\n                                <span class="time">${e.Due}</span>\n                            </div>\n                        </a>`;document.getElementById("notiitem").innerHTML+=t}))):(document.getElementById("noticount").style.display="none",document.getElementById("notiitems").style.display="none",document.getElementById("see-all").style.display="none")},error:function(e,t,n){}})}async function ValidateAvatar(){const e=document.getElementById("avatar"),t=e.value,n=new FormData;if(!/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(t))return alert("Please upload file having extensions .jpeg/.jpg/.png/.gif only."),e.value="",!1;n.append("avatar",e.files[0]);try{const e=await fetch("/upload-avatar",{method:"POST",body:n}),t=await e;e.ok?(document.getElementById("avatarFeedback").innerText="Uploaded successfully!",document.getElementById("avatarPreview").src="data:image/jpeg;base64,"+t.data):document.getElementById("avatarFeedback").innerText=t.detail||"Upload failed!"}catch(e){document.getElementById("avatarFeedback").innerText=e||"Error uploading file!"}return!0}$(document).ready((function(){notification(),$("#btnAccount").click((function(){$("#account").modal("toggle"),document.getElementById("accountTitle").innerHTML="Account",document.getElementById("frmPassword").hidden=!0,document.getElementById("frmRePassword").hidden=!0,document.getElementById("username").readOnly=!0,document.getElementById("email").readOnly=!0,document.getElementById("createdBy").hidden=!1,document.getElementById("createdDate").hidden=!1,document.getElementById("frmCreatedBy").hidden=!1,document.getElementById("frmCreatedDate").hidden=!1,document.getElementById("btnSave").hidden=!0,document.getElementById("btnOk").hidden=!0,document.getElementById("frmUsername").hidden=!1,document.getElementById("frmEmail").hidden=!1,document.getElementById("frmOldPassword").hidden=!0})),$("#btnRegister").click((function(){$("#account").modal("toggle"),document.getElementById("accountTitle").innerHTML="Register",document.getElementById("frmPassword").hidden=!1,document.getElementById("frmRePassword").hidden=!1,document.getElementById("username").readOnly=!1,document.getElementById("email").readOnly=!1,document.getElementById("createdBy").hidden=!0,document.getElementById("createdDate").hidden=!0,document.getElementById("frmCreatedBy").hidden=!0,document.getElementById("frmCreatedDate").hidden=!0,document.getElementById("btnSave").hidden=!1,document.getElementById("btnOk").hidden=!0,document.getElementById("username").value="",document.getElementById("email").value="",document.getElementById("frmUsername").hidden=!1,document.getElementById("frmEmail").hidden=!1,document.getElementById("frmOldPassword").hidden=!0})),$("#btnChangePassword").click((function(){$("#account").modal("toggle"),document.getElementById("accountTitle").innerHTML="Change Password",document.getElementById("frmPassword").hidden=!1,document.getElementById("frmRePassword").hidden=!1,document.getElementById("frmUsername").hidden=!0,document.getElementById("frmEmail").hidden=!0,document.getElementById("createdBy").hidden=!0,document.getElementById("createdDate").hidden=!0,document.getElementById("frmCreatedBy").hidden=!0,document.getElementById("frmCreatedDate").hidden=!0,document.getElementById("btnSave").hidden=!0,document.getElementById("btnOk").hidden=!1,document.getElementById("username").value="",document.getElementById("email").value="",document.getElementById("frmOldPassword").hidden=!1}))}));